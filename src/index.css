@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    background-color: #210d06; /* Color específico del usuario */
    @apply text-white;
    font-family: 'IBM Plex Mono', monospace;
    /* Bloquear scroll en móvil */
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
    /* Optimizaciones para reducir flickering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    backface-visibility: hidden;
    transform: translateZ(0);
  }
  
  /* Permitir scroll solo en desktop */
  @media (min-width: 640px) {
    body {
      overflow: auto;
      position: static;
      width: auto;
      height: auto;
    }
  }

  /* Selección de texto personalizada */
  ::selection {
    background-color: #ff1200; /* Mismo rojo que toda la app */
    color: #000000; /* Negro */
  }

  ::-moz-selection {
    background-color: #ff1200; /* Mismo rojo que toda la app para Firefox */
    color: #000000; /* Negro */
  }
}

@layer components {
  .sidebar-border {
    height: 1px;
    background-color: #ff1200;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    box-shadow: 0 0 3px rgba(255, 18, 0, 0.5);
  }

  .item-border {
    height: 1px;
    background-color: #ff1200;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    box-shadow: 0 0 2px rgba(255, 18, 0, 0.4);
  }

  .writing-mode-vertical-rl {
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }

  /* Borde redondeado principal */
  .rounded-border {
    border: 1px solid #ff1200;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 
      0 0 8px rgba(255, 18, 0, 0.4),
      0 0 16px rgba(255, 18, 0, 0.2);
  }

  /* Efecto glow para hover de filas - Optimizado para menos flickering */
  .sidebar-item-hover {
    transition: all 0.2s ease-out;
    will-change: transform, box-shadow, text-shadow;
  }

  .sidebar-item-hover:hover {
    box-shadow: 
      0 0 6px rgba(255, 18, 0, 0.4),
      0 0 12px rgba(255, 18, 0, 0.2),
      0 0 18px rgba(255, 18, 0, 0.1);
    text-shadow: 0 0 4px rgba(255, 18, 0, 0.6);
    transform: translateY(-1px);
  }

  /* Glow sutil para todos los elementos del sidebar - Optimizado */
  .sidebar-item-hover {
    text-shadow: 0 0 1px rgba(255, 18, 0, 0.3);
  }

  /* Efecto de flicker/tintineo CRT unificado - Una sola clase para todo */
  .crt-flicker {
    animation: flicker 0.25s infinite ease-in-out;
  }

  @keyframes flicker {
    0% { opacity: 0.95; }
    25% { opacity: 1; }
    50% { opacity: 0.97; }
    75% { opacity: 1; }
    100% { opacity: 0.95; }
  }

  /* Scanlines horizontales */
  .crt-scanlines {
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 18, 0, 0.02) 2px,
        rgba(255, 18, 0, 0.02) 4px
      );
    background-size: 100% 4px;
  }

  /* Vignette (oscurecimiento en los bordes) */
  .crt-vignette {
    box-shadow: 
      inset 0 0 100px rgba(0, 0, 0, 0.3),
      inset 0 0 200px rgba(0, 0, 0, 0.2);
  }

  /* Distorsión sutil de pantalla */
  .crt-distortion {
    transform: perspective(1000px) rotateX(0.5deg);
  }

  /* Efecto de "phosphor glow" */
  .crt-phosphor {
    filter: contrast(1.05) brightness(1.02);
  }

  /* Efectos CRT para el contenedor principal - Usa la clase unificada */
  .crt-effects {
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 18, 0, 0.04) 2px,
        rgba(255, 18, 0, 0.04) 4px
      );
    background-size: 100% 4px;
    box-shadow: 
      inset 0 0 80px rgba(0, 0, 0, 0.4),
      inset 0 0 150px rgba(0, 0, 0, 0.3);
    filter: contrast(1.1) brightness(1.05) blur(0.4px);
    /* Optimizaciones para reducir flickering */
    will-change: transform;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  /* Optimizaciones adicionales para el sidebar */
  .sidebar-optimized {
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

@layer utilities {
  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  .animate-fadeOut {
    animation: fadeOut 0.5s ease-out forwards;
  }
}
